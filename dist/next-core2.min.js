var nx={DEBUG:!1,BREAKER:{},VERSION:"1.0.2",GLOBAL:function(){return this}.call(null)};!function(t,n){var e,i={},_=i.toString,s=[],r=s.filter,o=s.slice,c=s.concat,a="Boolean Number String Function Array Date RegExp Object Error";a.split(" ").forEach(function(t){i["[object "+t+"]"]=t.toLowerCase()}),t.noop=function(){},t.each=function(n,e,i){var _,s;if(n)if(n.__each__)n.__each__(e,i);else if(s=n.length,t.isLikeArray(n))for(_=0;s>_&&e.call(i,_,n[_])!==t.BREAKER;_++);else for(_ in n)if(n.hasOwnProperty(_)&&e.call(i,_,n[_])===t.BREAKER)break},t.type=function(t){return null==t?String(t):i[_.call(t)]||"object"},t.isDocument=function(t){return null!=t&&9==t.nodeType},t.isWindow=function(t){return null!=t&&t==t.global},t.isNumber=function(t){return!isNaN(t)&&"number"==typeof t},t.isString=function(t){return"string"==typeof t},t.isArray=Array.isArray||function(t){return t instanceof Array},t.isLikeArray=function(t){return"number"==typeof t.length},t.isFunction=function(t){return"function"==typeof t},t.isObject=function(n){return"object"==t.type(n)},t.isPlainObject=function(n){return t.isObject(n)&&!t.isWindow(n)&&Object.getPrototypeOf(n)==Object.prototype},t.is=function(n,e){if(n&&n.__is__)return n.__is__(e);if("string"==typeof e)switch(e){case"undefined":case"null":return String(e);case"object":return t.isObject(n);case"plain":return t.isPlainObject(n);case"string":case"boolean":case"number":case"function":return typeof n===e;case"array":return t.isArray(n);default:return _(n).toLowerCase().slice(8,-1)===e}else if("function"==typeof e)return n instanceof e},t.unique=function(t){return r.call(t,function(n,e){return t.indexOf(n)==e})},t.flatten=function(t){return t.length>0?c.apply([],t):t},t.compact=function(t){return r.call(t,function(t){return null!=t})},t.grep=function(t,n){return r.call(t,n)},t.isEmptyObject=function(t){var n;for(n in t)return!1;return!0},t.inArray=function(t,n,e){return s.indexOf.call(n,t,e)},t.camelCase=function(t){return t.replace(/-+(.)?/g,function(t,n){return n?n.toUpperCase():""})},t.trim=function(t){return null==t?"":String.prototype.trim.call(t)},t.clone=function(n,i,_){var s,r=t.isPlainObject,o=t.isArray;for(s in i)_?(r(i[s])||o(i[s]))&&(r(i[s])&&!r(n[s])&&(n[s]={}),o(i[s])&&!o(n[s])&&(n[s]=[]),t.clone(n[s],i[s],_)):i[s]!==e&&(n[s]=i[s])},t.mix=function(n){var e,i=o.call(arguments,1);return"boolean"==typeof n&&(e=n,n=i.shift()),i.forEach(function(i){t.clone(n,i,e)}),n},t.path=function(t,i,_){if("string"!=typeof i)throw new Error("Path must be a string!");var s,r=i.split("."),o=t||n;return e===_?r.forEach(function(t){o=o[t]}):(s=r.pop(),r.forEach(function(t){o=o[t]=o[t]||{}}),o[s]=_),o}}(nx,nx.GLOBAL),"undefined"!=typeof module&&module.exports&&(module.exports=nx),function(t,n){t.event={init:function(){this.__listeners__={}},destroy:function(){this.__listeners__={}},on:function(t,n,e){var i=this.__listeners__,_=i[t]=i[t]||[];_.push({owner:this,handler:n,context:e})},off:function(n,e,i){var _=this.__listeners__[n];e?t.each(_,function(t,n){t.handler!==e||i&&t.context!==i||_.splice(n,1)}):_.length=0},fire:function(n,e){var i=this.__listeners__[n];i&&t.each(i,function(n){return n&&n.handler&&n.handler.call(n.context||n.owner,n.owner,e)===!1?t.BREAKER:void 0})}}}(nx,nx.GLOBAL),function(t,n){t.RootClass=function(){};var e=t.mix({toString:function(){return"[object "+this.__type__+"]"},base:function(){var t=this.base.caller.__base__;return t?t.apply(this,arguments):void 0},is:function(n){var e=this.__type__;if(e===n)return!0;var i=this.__base__;return i?t.is(i.prototype,n):!1},has:function(t){return t in this},get:function(t){var n=this.memberType(t);switch(n){case"method":case"property":return this[t];case"static":return this.constructor[t]}},set:function(t,n){this[t]=n},gets:function(){var n={};return t.each(this.__properties__,function(t,e){n[e]=this.get(e)},this),n},sets:function(n){t.each(n,function(t,n){this.set(n,t)},this)},getMeta:function(t){return this.__meta__[t]},setMeta:function(t,n){this.__meta__[t]=n},member:function(t){return this["@"+t]||this[t]||this.constructor[t]},memberType:function(t){var n=this.member(t);return n.__type__},__is__:function(t){return this.is(t)},__has__:function(t){return this.has(t)},__get__:function(t){return this.get(t)},__set__:function(t,n){return this.set(t,n)},__gets__:function(){return this.gets()},__sets__:function(t){return this.sets(t)}},t.event),i={constructor:t.RootClass,__type__:"nx.Object",__classId__:0,__init__:t.noop,__mixins__:[],__statics__:{},__properties__:{},__methods__:e};t.mix(t.RootClass.prototype,i,e),t.mix(t.RootClass,i,e)}(nx,nx.GLOBAL),function(t,n){t.defineProperty=function(n,e,i){var _,s="@"+e;i=t.isObject(i)?i:{value:i};var r,o,c,a,u;return"value"in i?(a=i.value,u="_"+e,_=t.type(a),r=function(){return u in this?this[u]:t.isFunction(_)?a.call(this):a},o=function(t){this[u]=t}):(r=i.get||t.noop,o=i.set||t.noop),s in n&&(r.__base__=n[s].get,o.__base__=n[s].set),c=n[s]={__meta__:i,__name__:e,__type__:"property",get:r,set:o,configurable:!0},Object.defineProperty(n,e,c),c},t.defineMethod=function(n,e,i){var _={__meta__:i,__name__:e,__type__:"method"};return t.mix(i,_),n[e]=i,_},t.defineStatic=function(n,e,i){var _={__meta__:i,__name__:e,__type__:"static"};return t.mix(i,_),n[e]=i,_}}(nx,nx.GLOBAL),function(t,n){function e(n,e){this.type=n,this.meta=e,this.base=e.extend||t.RootClass,this.__classMeta__={},this.__Class__=null,this.__constructor__=null}var i=1,_=0,s={},r=Array.prototype.slice,o={distinct:function(t){var n,e=[],i={};return t.forEach(function(t){n=t.__type__,i[n]||(i[n]=!0,e.push(t))}),e||t},union:function(){var n=[];return t.each(arguments,function(t){n=n.concat(t||[])}),o.distinct(n)}};e.prototype={constructor:e,initMetaProcessor:function(){var n=this.meta.methods||{};t.mix(this.__classMeta__,{__type__:this.type,__meta__:this.meta,__base__:this.base,__classId__:i++,__init__:n.init||this.base.__init__})},createClassProcessor:function(){var t=this;this.__Class__=function(){this.__id__=++_,this.__listeners__={},t.__constructor__.apply(this,r.call(arguments)),s[_]=this}},mixinItemsProcessor:function(){var n=this.base,e=this.meta.mixins,i=this.__classMeta__,_=[],s={},r={},c={},a=[],u={},f={},h={};t.each(e,function(n){a=n.__mixins__,u=n.__methods__,f=n.__properties__,h=n.__statics__,_=_.concat(a),t.mix(s,u),t.mix(r,f),t.mix(c,h)}),i.__mixins__=o.union(_,n.__mixins__,e),i.__methods__=t.mix(s,n.__methods__),i.__properties__=t.mix(r,n.__properties__),i.__statics__=t.mix(c,n.__statics__)},inheritProcessor:function(){var t=this.__classMeta__;this.defineMethods(t),this.defineProperties(t),this.defineStatics(t)},defineMethods:function(n){var e=this.meta.methods||{},i=Object.keys(e),_=n.__methods__,s=this.__Class__.prototype;t.each(_,function(n,_){t.defineMethod(s,_,n),i.indexOf(_)>-1&&(t.defineMethod(s,_,e[_]),s[_].__base__=n)}),t.each(e,function(n,e){s[e]||t.defineMethod(s,e,n)}),n.__methods__=t.mix(_,e)},defineProperties:function(n){var e=this.meta.properties||{},i=Object.keys(e),_=n.__properties__,s=this.__Class__.prototype;t.each(_,function(n,_){var r,o;r=t.defineProperty(s,_,n),i.indexOf(_)>-1&&(o=t.defineProperty(s,_,e[_]),o.set&&(o.set.__base__=r.set),o.get.__base__=r.get)}),t.each(e,function(n,e){s[e]||t.defineProperty(s,e,n)}),n.__properties__=t.mix(_,e)},defineStatics:function(n){var e=t.mix(n.__statics__,this.meta.statics);t.each(e,function(n,e){t.defineStatic(this.__Class__,e,n)},this)},methodsConstructorProcessor:function(){var n=this.__classMeta__,e=n.__mixins__;this.__constructor__=function(){t.each(e,function(t){t.__init__.call(this)},this),n.__init__.apply(this,r.call(arguments))}},staticsConstructorProcessor:function(){var t=this.meta.statics;t&&t.init&&t.init.call(this.__Class__)},registerNsProcessor:function(){var e=this.type,i=this.__Class__,_=this.__classMeta__;t.mix(i.prototype,_,{constructor:this.__Class__}),t.mix(i,_),"nx.Anonymous"!==e&&t.path(n,e,i)}},t.declare=function(t,n){var i="string"==typeof t?t:"nx.Anonymous",_=n||t,s=new e(i,_);return s.initMetaProcessor(),s.createClassProcessor(),s.mixinItemsProcessor(),s.inheritProcessor(),s.methodsConstructorProcessor(),s.staticsConstructorProcessor(),s.registerNsProcessor(),s.__Class__},t.DEBUG&&(t.$=function(t){return s[t]})}(nx,nx.GLOBAL);