;(function(root, factory) {
  if (typeof define === 'function' && define.amd) {
    define([], factory);
  } else if (typeof exports === 'object') {
    module.exports = factory();
  } else {
    root.nx = factory();
  }
}(this, function() {
var nx={BREAKER:{},VERSION:"1.0.5",GLOBAL:function(){return this}.call(null)};!function(_,t,n){var e=Object.prototype.toString,s={"[object Boolean]":"Boolean","[object Number]":"Number","[object String]":"String","[object Function]":"Function","[object Array]":"Array","[object Date]":"Date","[object RegExp]":"RegExp","[object Object]":"Object","[object Error]":"Error"},i={typeString:function(_){return e.call(_).slice(8,-1)}};_.noop=function(){},_.each=function(t,n,e){var s,i;if(t)if(t.__each__)t.__each__(n,e);else if(i=t.length,i>=0)for(s=0;i>s&&n.call(e,t[s],s)!==_.BREAKER;s++);else for(s in t)if(t.hasOwnProperty(s)&&n.call(e,t[s],s)===_.BREAKER)break},_.mix=function(t){var n,e;for(n=1,e=arguments.length;e>n;n++)_.each(arguments[n],function(_,n){t[n]=_});return t},_.type=function(_){var t;return _&&_.__type__?_.__type__:null===_?"Null":_===n?"Undefined":(t=e.call(_),s[t]||i.typeString(_))},_.path=function(t,e,s){if("string"!=typeof e)throw new Error("Path must be a string!");var i,o=e.split("."),r=t||_.GLOBAL;return n===s?_.each(o,function(_){r=r[_]}):(i=o.pop(),_.each(o,function(_){r=r[_]=r[_]||{}}),r[i]=s),r}}(nx,nx.GLOBAL),function(_,t){_.event={init:function(){this.__listeners__={}},destroy:function(){this.__listeners__={}},on:function(_,t,n){var e=this.__listeners__,s=e[_]=e[_]||[];s.push({owner:this,handler:t,context:n})},off:function(t,n,e){var s=this.__listeners__[t];n?_.each(s,function(_,t){_.handler!==n||e&&_.context!==e||s.splice(t,1)}):s.length=0},fire:function(t,n){var e=this.__listeners__[t];e&&_.each(e,function(t){return t&&t.handler&&t.handler.call(t.context||t.owner,t.owner,n)===!1?_.BREAKER:void 0})}}}(nx,nx.GLOBAL),function(_,t){function n(){}var e={__classId__:0,__type__:"nx.RootClass",__init__:_.noop,__static_init__:_.noop,__mixins__:[],__statics__:{},__events__:[],__properties__:[],__methods__:[]},s=n.prototype={constructor:n,base:function(){var _=this.base.caller.__base__;return _?_.apply(this,arguments):void 0},meta:function(_){return this["__"+_+"__"]},init:function(){},destroy:function(){},toString:function(){return"[Class@"+this.__type__+"]"}};_.mix(n,e),_.mix(s,e),_.mix(s,_.event),_.RootClass=n}(nx,nx.GLOBAL),function(_,t){function n(){this.__Class__=null,this.__Constructor__=_.noop}var e=1,s=1,i=Array.prototype.slice,o={inherit:function(_){function t(){}var n;return t.prototype=_.prototype,n=new t,n.constructor=_,n},distinct:function(t){var n,e,s=[],i={};return _.each(t,function(_){n=typeof _,e="string"===n?n+_:_.__type__,i[e]||(i[e]=!0,s.push(_))}),s||t},indexOf:function(t,n){var e=-1;return _.each(t,function(t,s){return n===t?(e=s,_.BREAKER):void 0}),e},union:function(){var t=[];return _.each(arguments,function(_){t=t.concat(_||[])}),o.distinct(t)},keys:function(){return Object.keys||function(_){var t=[];for(t[t.length]in _);return t}}()};n.prototype={constructor:n,metaInitialProcessor:function(t,n){var s=n.__base__=t.extend||_.RootClass,i=t.methods,o=t.statics;n.__static__=t.statics&&!t.methods,n.__classId__=e++,n.__init__=i&&i.init||s.__init__,n.__static_init__=o&&o.init||s.__static_init__,n.$base=s.prototype},createClassProcessor:function(_,t){var n=this;t.__static__?this.__Class__=function(){throw new Error("Cannot instantiate static class.")}:this.__Class__=function(){this.__instanceId__=s++,this.__listeners__={},n.__Constructor__.apply(this,i.call(arguments,0)||{})}},mixinsProcessor:function(t,n){var e=n.__base__,s=n.__mixins__=o.union(e.__mixins__,t.mixins),i={},r=[],c=[],a=[];_.each(s,function(t){_.mix(i,t.__statics__),r=r.concat(t.__events__),c=c.concat(t.__properties__),a=a.concat(t.__methods__)},this),n.__statics__=i,n.__events__=r,n.__properties__=c,n.__methods__=a},staticsProcessor:function(t,n){var e=n.__base__,s=_.mix(n.__statics__,e.__statics__,t.statics);n.__methods__=o.keys(s),_.mix(this.__Class__,s)},eventsProcessor:function(_,t){var n=t.__base__;t.__events__=o.union(t.__events__,n.__events__,_.events)},propertiesProcessor:function(_,t){var n=t.__base__;t.__properties__=o.union(t.__properties__,n.__properties__,o.keys(_.properties||{}))},methodsProcessor:function(_,t){var n=t.__base__;t.__methods__=o.union(t.__methods__,n.__methods__,o.keys(_.methods||{}))},constructorProcessor:function(t,n){var e=n.__mixins__;this.__Constructor__=function(){_.each(e,function(_){_.__init__.call(this)},this),n.__init__.apply(this,i.call(arguments,0)||{})}},inheritedProcessor:function(t,n){var e,s,i=n.__base__;n.__static__?(s=this.__Class__,_.mix(s,i.prototype)):(e=o.inherit(i),s=this.__Class__.prototype=e),this.__mixinMetas(s,t),this.__inheritedMethods(s,n.__methods__,t),this.__inheritedProperties(s,n.__properties__,t)},staticConstructorProcessor:function(_,t){t.__static_init__.call(this.__Class__)},registerNamespace:function(n,e){var s=e.__type__,i=this.__Class__;e.__static__||_.mix(i.prototype,e),_.mix(i,e),"nx.Anonymous"!==s&&_.path(t,s,i)},__mixinMetas:function(t,n){var e,s,i,o,r,c=n.mixins;_.each(c,function(n){e=n.__methods__,s=n.__properties__,i=n.__static__?n:n.prototype,_.each(e,function(_){t[_]=i[_]}),_.each(s,function(_){o="$_setter_"+_,r="$_getter_"+_,t[o]=i[o],t[r]=i[r],t[_]=i[_]})})},__inheritedMethods:function(t,n,e){var s,i=e.methods||{};_.each(n,function(_){s=i[_],s&&(s.__base__=t[_],t[_]=s)})},__inheritedProperties:function(t,n,e){var s,i,o,r=e.properties||{};_.each(r,function(n,e){var r,c;o=t[e],s="$_setter_"+e,i="$_getter_"+e,r=n.set||_.noop,c=n.get||_.noop,o&&(r.__base__=t[s],c.__base__=t[i]),t[s]=r,t[i]=c,t[e]=function(_){return"undefined"==typeof _?c.call(this):r.call(this,_)}})}},_.declare=function(_,t){var e,s={},i=s.__meta__=t||_,o=new n;return s.__type__="string"==typeof _?_:"nx.Anonymous",o.metaInitialProcessor(i,s),o.createClassProcessor(i,s),o.mixinsProcessor(i,s),o.staticsProcessor(i,s),o.eventsProcessor(i,s),o.propertiesProcessor(i,s),o.methodsProcessor(i,s),o.constructorProcessor(i,s),o.inheritedProcessor(i,s),o.staticConstructorProcessor(i,s),o.registerNamespace(i,s),e=o.__Class__}}(nx,nx.GLOBAL);
return nx;
}));
